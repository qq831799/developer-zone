"use strict";(self.webpackChunkocto_develop_zone=self.webpackChunkocto_develop_zone||[]).push([[223],{9286:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>r});var s=t(4848),a=t(8453);const i={},l=void 0,d={id:"Implement Features/States",title:"States",description:"states-sequence",source:"@site/docs/Implement Features/States.md",sourceDirName:"Implement Features",slug:"/Implement Features/States",permalink:"/developer-zone/Implement Features/States",draft:!1,unlisted:!1,editUrl:"https://github.com/allxon/developer-zone/edit/master/docs/Implement Features/States.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Properties",permalink:"/developer-zone/Implement Features/Properties"},next:{title:"Commands",permalink:"/developer-zone/Implement Features/Commands"}},o={},r=[{value:"Tutorials",id:"tutorials",level:2},{value:"Display Type",id:"display-type",level:2},{value:"String",id:"string",level:3},{value:"Link",id:"link",level:3},{value:"Table",id:"table",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"states-sequence",src:t(7029).A+"",width:"3197",height:"1373"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"States"})," card is designed for providing current device states. Such data is not reserved on Allxon Cloud; only the latest data is shown on the Portal. You need to send ",(0,s.jsx)(n.code,{children:"v2/notifyPluginState"})," to initialize the ",(0,s.jsx)(n.strong,{children:"States"})," card, and then continually send ",(0,s.jsx)(n.code,{children:"v2/notifyPluginState"})," to update the information on the ",(0,s.jsx)(n.strong,{children:"States"})," card."]}),"\n",(0,s.jsx)(n.h2,{id:"tutorials",children:"Tutorials"}),"\n",(0,s.jsxs)(n.p,{children:["Here is an example of creating the ",(0,s.jsx)(n.strong,{children:"States"})," card:"]}),"\n",(0,s.jsxs)(n.p,{children:["First, send the following ",(0,s.jsx)(n.code,{children:"v2/notifyPluginState"})," JSON."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:"{17-25}",children:'{\n  "jsonrpc": "2.0",\n  "method": "v2/notifyPluginUpdate",\n  "params": {\n    "sdk": "${OCTO_SDK_VERSION}",\n    "appGUID": "${PLUGIN_APP_GUID}",\n    "appName": "${PLUGIN_NAME}",\n    "epoch": "",\n    "displayName": "Device Info",\n    "type": "ib",\n    "version": "${PLUGIN_VERSION}",\n    "modules": [\n      {\n        "moduleName": "device-info-plugin",\n        "displayName": "Device Info",\n        "properties": [],\n        "states": [\n          {\n            "name": "battery-percent",\n            "displayCategory": "Power",\n            "displayName": "Battery",\n            "description": "remaining battery percentage",\n            "displayType": "string"\n          }\n        ]\n      }\n    ]\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Once done, Allxon Portal shows the ",(0,s.jsx)(n.strong,{children:"States"})," card below. There is no value for ",(0,s.jsx)(n.em,{children:"Battery"})," because it's still in the initialization state."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"states-card",src:t(8615).A+"",width:"3314",height:"1128"})}),"\n",(0,s.jsxs)(n.p,{children:["Next, send ",(0,s.jsx)(n.code,{children:"v2/notifyPluginState"})," to assign and update the ",(0,s.jsx)(n.em,{children:"Battery"})," value:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:"{11}",children:'{\n  "jsonrpc": "2.0",\n  "method": "v2/notifyPluginState",\n  "params": {\n    "appGUID": "${PLUGIN_APP_GUID}",\n    "moduleName": "${PLUGIN_NAME}",\n    "epoch": "",\n    "states": [\n      {\n        "name": "battery-percent",\n        "value": "50"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Then you can see the ",(0,s.jsx)(n.em,{children:"Battery"})," value has been updated, and the time of update is displayed below the value."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"states-battery",src:t(6441).A+"",width:"3315",height:"1127"})}),"\n",(0,s.jsx)(n.admonition,{title:"Limitation",type:"note",children:(0,s.jsxs)(n.p,{children:["The update frequency of the ",(0,s.jsx)(n.strong,{children:"States"})," value is about once a minute."]})}),"\n",(0,s.jsx)(n.h2,{id:"display-type",children:"Display Type"}),"\n",(0,s.jsxs)(n.p,{children:["The card supports three display types: ",(0,s.jsx)(n.a,{href:"#string",children:"string"}),", ",(0,s.jsx)(n.a,{href:"#link",children:"link"}),", and ",(0,s.jsx)(n.a,{href:"#table",children:"table"}),". For how to set up these display types, see the following sections."]}),"\n",(0,s.jsx)(n.h3,{id:"string",children:"String"}),"\n",(0,s.jsxs)(n.p,{children:["The following example shows the code in ",(0,s.jsx)(n.code,{children:"v2/notifyPluginUpdate.json"})," for displaying a state in string format."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="v2/notifyPluginUpdate.json"',children:'{\n    ...\n    "states": [\n        {\n            "name": "stringState",\n            "displayType": "string",\n            ...\n        },\n        ...\n    ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"v2/notifyPluginState.json"})," is used to update the state, the ",(0,s.jsx)(n.code,{children:'"name"'})," must be identical to that in ",(0,s.jsx)(n.code,{children:"v2/notifyPluginUpdate.json"}),", and the data type of ",(0,s.jsx)(n.code,{children:'"value"'})," must be ",(0,s.jsx)(n.strong,{children:"String"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="v2/notifyPluginState.json"',children:'{\n    "jsonrpc": "2.0",\n    "method": "v2/notifyPluginState",\n    "params": {\n        "states": [\n            {\n                "name": "stringState",\n                "value": "my state string"\n            },\n            ...\n        ]\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Then the ",(0,s.jsx)(n.strong,{children:"States"})," card is updated, as shown below.\n",(0,s.jsx)(n.img,{alt:"state-display-type-string-exec",src:t(4719).A+"",width:"589",height:"176"})]}),"\n",(0,s.jsx)(n.h3,{id:"link",children:"Link"}),"\n",(0,s.jsxs)(n.p,{children:["The following example shows the code in ",(0,s.jsx)(n.code,{children:"v2/notifyPluginUpdate.json"})," for displaying a state as a hyperlink."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="v2/notifyPluginUpdate.json"',children:'{\n    ...\n    "states": [\n        {\n            "name": "linkState",\n            "displayType": "link",\n            ...\n        },\n        ...\n    ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"v2/notifyPluginState.json"})," is used to update the state, the ",(0,s.jsx)(n.code,{children:'"name"'})," must be identical to that in ",(0,s.jsx)(n.code,{children:'"v2/notifyPluginUpdate.json"'}),", and the data type of ",(0,s.jsx)(n.code,{children:'"value"'})," must be ",(0,s.jsx)(n.strong,{children:"Object"})," along with ",(0,s.jsx)(n.code,{children:'"url"'})," and ",(0,s.jsx)(n.code,{children:'"alias"'}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="v2/notifyPluginState.json"',children:'{\n    "jsonrpc": "2.0",\n    "method": "v2/notifyPluginState",\n    "params": {\n        ...\n        "states": [\n            {\n                "name": "linkState",\n                "value": {\n                    "url": "https://www.google.com",\n                    "alias": "Google Site"\n                }\n            },\n            ...\n        ]\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Then the ",(0,s.jsx)(n.strong,{children:"States"})," card is updated, as shown below."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"state-display-type-link-exec",src:t(4806).A+"",width:"589",height:"172"})}),"\n",(0,s.jsx)(n.h3,{id:"table",children:"Table"}),"\n",(0,s.jsxs)(n.p,{children:["The following example shows the code in ",(0,s.jsx)(n.code,{children:"v2/notifyPluginUpdate.json"})," for displaying a state in a table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="v2/notifyPluginUpdate.json"',children:'{\n    ...\n    "states": [\n        {\n            "name": "tableState",\n            "displayType": "table",\n            ...\n        },\n        ...\n    ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:'"v2/notifyPluginState.json"'})," is used to update the state, the ",(0,s.jsx)(n.code,{children:'"name"'})," must be identical to that in ",(0,s.jsx)(n.code,{children:'"v2/notifyPluginUpdate.json"'}),". To define the content of the table, the data type of ",(0,s.jsx)(n.code,{children:'"value"'})," must be Array and follow the format in the example below."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="v2/notifyPluginState.json"',children:'{\n    "jsonrpc": "2.0",\n    "method": "v2/notifyPluginState",\n    "params": {\n        ...\n        "states": [\n            {\n                "name": "tableState",\n                "value": [\n                    {\n                        "header1": "row1 column1",\n                        "header2": "row1 column2"\n                    },\n                    {\n                        "header1": "row2 column2",\n                        "header2": "row2 column2"\n                    }\n                ]\n            }\n        ]\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Then the ",(0,s.jsx)(n.strong,{children:"States"})," card displays a table icon."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"state-display-type-table-exec",src:t(4020).A+"",width:"583",height:"181"})}),"\n",(0,s.jsx)(n.p,{children:"Clicking the table icon brings up the details."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"state-display-type-table-popup",src:t(921).A+"",width:"526",height:"285"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},4806:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/state-display-type-link-exec-1fdd17eb67852f77deb7e160d595b9ac.png"},4719:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/state-display-type-string-exec-fda669af52fa8f9ac57da0bc21851c12.png"},4020:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/state-display-type-table-exec-d739f36c95b4b14101df81c7eba51a2b.png"},921:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/state-display-type-table-popup-ec8999312e0e82e782afd56b788bd9c0.png"},6441:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/states-battery-50-9ccf6ec092b4b5139ab5114154266061.svg"},8615:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/states-card-8e54b5bdb40a71b9ba5ca0ce7178183c.svg"},7029:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/states-sequence-10604666811625d57c0f8c311793d30e.svg"},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>d});var s=t(6540);const a={},i=s.createContext(a);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);