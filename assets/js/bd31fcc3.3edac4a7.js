"use strict";(self.webpackChunkocto_develop_zone=self.webpackChunkocto_develop_zone||[]).push([[2022],{5808:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var t=i(4848),r=i(8453);const o={},s="Authorization",a={id:"APIAuthorization",title:"Authorization",description:"API Key Introduction",source:"@site/allxonApi/APIAuthorization.md",sourceDirName:".",slug:"/APIAuthorization",permalink:"/developer-zone/allxon-api/APIAuthorization",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"allxonApiSidebar",previous:{title:"Overview",permalink:"/developer-zone/allxon-api/APIOverview"},next:{title:"Ratelimits",permalink:"/developer-zone/allxon-api/Ratelimits"}},l={},c=[{value:"API Key Introduction",id:"api-key-introduction",level:2},{value:"Authenticating Requests",id:"authenticating-requests",level:2},{value:"Signature Generation",id:"signature-generation",level:3},{value:"Step By Step",id:"step-by-step",level:4},{value:"Derive the Signing Key",id:"derive-the-signing-key",level:5},{value:"Calculate the Signature",id:"calculate-the-signature",level:5},{value:"Set the Authorization Header",id:"set-the-authorization-header",level:5}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"authorization",children:"Authorization"}),"\n",(0,t.jsx)(n.h2,{id:"api-key-introduction",children:"API Key Introduction"}),"\n",(0,t.jsxs)(n.p,{children:["Allxon API uses an ",(0,t.jsx)(n.strong,{children:"API key"})," to authenticate each request. You can view and manage API keys in the ",(0,t.jsx)(n.a,{href:"https://dms.allxon.com/developer/apikeys",children:"Allxon Portal"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["There is a one-to-one relationship between the ",(0,t.jsx)(n.strong,{children:"Key ID"})," and the ",(0,t.jsx)(n.strong,{children:"Secret"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Ex:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'"Key ID": "Secret"\n'})}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Secure Your API Key's Secret"})}),(0,t.jsx)(n.p,{children:"Your API key's secret must be treated like password. To keep your integration secure, never store the secret in your source code or commit it in version control. Instead, use a password manager or deployment system to provide the secret."})]}),"\n",(0,t.jsx)(n.p,{children:"Every request in Allxon API must contain an authorization that generated by API key and must be made over HTTPS."}),"\n",(0,t.jsx)(n.h2,{id:"authenticating-requests",children:"Authenticating Requests"}),"\n",(0,t.jsxs)(n.p,{children:["Your authorization must be included in the ",(0,t.jsx)(n.code,{children:"Authorization"})," header of every request."]}),"\n",(0,t.jsx)(n.p,{children:"The following is an example of the Authorization header value:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'Authorization: ALLXON-SIG1 Credential="Key ID",Signature="request signature"\n'})}),"\n",(0,t.jsx)(n.p,{children:"The following table describes the various components of the Authorization header value:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ALLXON-SIG1"}),": The algorithm that was used to calculate the signature. You must provide this value when you use Allxon Signature version 1 for authentication. The ",(0,t.jsx)(n.code,{children:"ALLXON-SIG1"})," specifies Allxon Signature version 1."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Credential"}),": Your API key's ",(0,t.jsx)(n.code,{children:"Key ID"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Signature"}),": A hex encoded form of the SHA-256 hash. That can be ",(0,t.jsx)(n.a,{href:"#signature-calculation",children:"generated"})," from your API key."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"signature-generation",children:"Signature Generation"}),"\n",(0,t.jsx)(n.p,{children:"Each API request must include a signature. Use your API key's secret to derive a signing key, and then calculate a signature."}),"\n",(0,t.jsx)(n.p,{children:"The following diagram illustrates the general process of computing a signature:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'SigningKey = Hex(HMAC-SHA256("<APISecretAccessKey>", STR(FLOOR(<X-Allxon-Epoch> / 3600000))))\n\nSignature = Hex(HMAC-SHA256("<SigningKey>", "<HTTPMethod>" + "<EndpointPathWithSearch>" + "<X-Allxon-Epoch>"))\n'})}),"\n",(0,t.jsx)(n.p,{children:"Here is the noun in the diagram"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["X-Allxon-Epoch: The timestamp in milliseconds, as in the ",(0,t.jsx)(n.a,{href:"/developer-zone/allxon-api/APIOverview#request-header",children:"request header"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"HMAC-SHA256(): Computes HMAC by using the SHA256 algorithm with the signing key provided."}),"\n",(0,t.jsx)(n.li,{children:"FLOOR(): Rounds and returns the largest integer less than or equal to a given number."}),"\n",(0,t.jsx)(n.li,{children:"STR(): Converts the specified value into a string."}),"\n",(0,t.jsx)(n.li,{children:"Hex(): Lowercase base-16 encoding."}),"\n",(0,t.jsx)(n.li,{children:"HTTPMethod: Your request HTTP method."}),"\n",(0,t.jsxs)(n.li,{children:["EndpointPathWithSearch: The API endpoint path and string to be searched for, ex: ",(0,t.jsx)(n.code,{children:"/path?search=xxx"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"step-by-step",children:"Step By Step"}),"\n",(0,t.jsx)(n.p,{children:"Example values:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Key ID"})," is ",(0,t.jsx)(n.code,{children:"APIAEXAMPLEKEYID"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Secret"})," is ",(0,t.jsx)(n.code,{children:"EPqeEGVcYf6Zpo+6yCqHeoYJSrnDykc9gPShOA=="})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"X-Allxon-Epoch"})," current epoch timestamp in milliseconds is ",(0,t.jsx)(n.code,{children:"1708954065872"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"derive-the-signing-key",children:"Derive the Signing Key"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'SigningKey = Hex(\n        HMAC-SHA256(\n            "EPqeEGVcYf6Zpo+6yCqHeoYJSrnDykc9gPShOA==", \n            STR(FLOOR(1708954065872 / 3600000))\n        )\n    )\n          = "9e73a5982eb5a38cb36830773eb92d0d12cbece741a9c95cdab678f1971eb58d"\n'})}),"\n",(0,t.jsx)(n.h5,{id:"calculate-the-signature",children:"Calculate the Signature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'Signature = Hex(\n        HMAC-SHA256(\n            "9e73a5982eb5a38cb36830773eb92d0d12cbece741a9c95cdab678f1971eb58d",\n            "POST/ota/deployment1708954065872"\n        )\n    )\n          = "77d0a82a06cf01f53fc0d4e2273fc97f876041310790625533de79198ca90379"\n'})}),"\n",(0,t.jsx)(n.h5,{id:"set-the-authorization-header",children:"Set the Authorization Header"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'Authorization: ALLXON-SIG1 Credential="APIAEXAMPLEKEYID",Signature="77d0a82a06cf01f53fc0d4e2273fc97f876041310790625533de79198ca90379"\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var t=i(6540);const r={},o=t.createContext(r);function s(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);